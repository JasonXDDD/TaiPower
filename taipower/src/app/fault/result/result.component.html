<!-- <input type="file" accept="image/*" capture> -->
<!-- <a href="https://www.google.com/maps/place/%E8%87%BA%E5%8C%97%E5%A4%A7%E5%AE%89%E9%81%8B%E5%8B%95%E4%B8%AD%E5%BF%83/@25.0206288,121.5457421,18.78z/data=!4m5!3m4!1s0x3442aa2f7891f2f7:0xc8a9c8385d06362a!8m2!3d25.0207388!4d121.5457579" target="_blank">Map</a> -->
<div class="container">
  <div class="collapse">

    <div class="historyBox" *ngFor="let item of eventList; let id = index; let last = last" #history>
      <div class="togglefaq" (click)="openPane(item, id, $event)">
        <p class="date">{{ item.create_date }}</p>
        <p class="location">{{ item.linename }}</p>
        <p class="date" style="margin-left: auto;" [ngClass]="{'error': item.report.length == 0}">
          {{ item.report.length == 0? '尚未回報': item.report.length + '則回報' }}
        </p>
      </div>

      <div class="faqanswer">
        <div class="mapBox" style="padding: 10px">
          <div class="map">
            <div class="idMap" [id]="'mapid' + id"></div>
          </div>

          <div style="width: calc(100% - 400px); overflow: hidden;">
            <!-- <div class="map_information stepFormBox">
              <div class="little_bar">
                <p>故障資訊</p>
              </div>
              <ul class="malfunction">
                <li class="malfunction_information">
                  <p class="tittle">發生時間</p>
                  <p class="context">
                    {{ eventResult.faulttime }}
                  </p>
                </li>
                <div class="line"></div>
                <li class="malfunction_information">
                  <p class="tittle">故障座標</p>
                  <p class="context">
                    經度：{{ eventResult.est_long }},<br>
                    緯度：{{ eventResult.est_lati }}
                  </p>
                </li>
                <div class="line"></div>
                <li class="malfunction_information">
                  <p class="tittle">故障位置</p>
                  <p class="context">
                    距{{ eventResult.ref_sub }} {{ eventResult.dis_to_sub }} 公里處
                  </p>
                </li>
                <div class="line"></div>
                <li class="malfunction_information">
                  <p class="tittle">故障狀況</p>
                  <p class="context">供電時常短路</p>
                </li>
                <div class="line"></div>
                <li class="malfunction_information">
                  <p class="tittle">故障原因</p>
                  <p class="context">不明</p>
                </li>
                <div class="line"></div>
                <li class="malfunction_information">
                  <p class="tittle">電塔距離</p>
                  <p class="context">
                    從{{ eventResult.ref_sub }}變電所，第 {{ eventResult.towerN }} 與 {{ eventResult.towerN_2 }} 電塔之間
                  </p>
                </li>
              </ul>
            </div> -->

            <div style="display: flex;">
              <div class="map_information stepFormBox" style="padding: 3rem 1rem; text-align: right; width: 380px;">
                <div class="little_bar">
                  <p style="text-align: right; width: 100%; padding-right: 1rem;">欄位</p>
                </div>
                <ul class="malfunction">
                  <li class="malfunction_information">
                    <p class="tittle">故障時間</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">參考變電站</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">故障至變電站距離</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">故障位置</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">故障座標</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">參考線路總長</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">原始輸入</p>
                  </li>

                </ul>
              </div>

              <div class="map_information stepFormBox" style="padding-top: 3rem;">
                <div class="little_bar">
                  <p>新型視窗定位方法</p>
                </div>
                <ul class="malfunction">
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.faulttime }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.ref_sub }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.dis_to_sub | number: '0.0-3' }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      第 {{ eventResult.towerN }} 與 {{ eventResult.towerN_2 }} 電塔之間
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.est_long }},
                      {{ eventResult.est_lati }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.ref_length }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      無
                    </p>
                  </li>

                </ul>
              </div>

              <div class="map_information stepFormBox" style="padding-top: 3rem;">
                <div class="little_bar">
                  <p>疊加法</p>
                </div>

                <ul class="malfunction">
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.faulttime }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.ref_sub }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.dis_to_sub_it | number: '0.0-3' }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      第 {{ eventResult.towerN_it }} 與 {{ eventResult.towerN_2_it }} 電塔之間
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.est_long_it }},
                      {{ eventResult.est_lati_it }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.ref_length }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      無
                    </p>
                  </li>

                </ul>
              </div>

              <div class="map_information stepFormBox" style="padding-top: 3rem;">
                <div class="little_bar">
                  <p>台電定位方法</p>
                </div>
                <ul class="malfunction">
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.faulttime }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">{{ eventResult.ref_sub_for_tai_tower }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      S: {{ eventResult.dis_to_sub_taiS | number: '0.0-3' }},&nbsp;&nbsp;
                      R: {{ eventResult.dis_to_sub_taiR | number: '0.0-3' }},&nbsp;&nbsp;
                      T: {{ eventResult.dis_to_sub_taiT | number: '0.0-3' }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      第 {{ eventResult.towerN_tai }} 與 {{ eventResult.towerN_2_tai }} 電塔之間
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.est_long_tai }},
                      {{ eventResult.est_lati_tai }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      {{ eventResult.ref_length }}
                    </p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="context">
                      S: {{ eventResult.dis_to_sub_taiS_original }},&nbsp;&nbsp;
                      R: {{ eventResult.dis_to_sub_taiR_original }},&nbsp;&nbsp;
                      T: {{ eventResult.dis_to_sub_taiT_original }}
                    </p>
                  </li>

                </ul>
              </div>
            </div>

            <div class="map_information" style="margin-top: 15px;" *ngIf="item.report.length > 0">
              <div class="little_bar">
                <p>回報資料</p>
              </div>
              <div class="pc" style="display: flex; flex-direction: column;">
                <ul class="malfunction">
                  <li class="malfunction_information">
                    <p class="tittle">故障描述</p>
                    <p class="context">{{ item.report[0].description }}</p>
                  </li>
                  <div class="line"></div>
                  <li class="malfunction_information">
                    <p class="tittle">備註</p>
                    <div class="distance">
                      <p class="context">{{ item.report[0].opinion }}</p>
                    </div>
                  </li>
                </ul>

                <div class="photo">
                  <div class="picture" *ngFor="let photo of eventResult.photo">
                    <div class="image" [ngStyle]="{'backgroundImage': 'url(' + photo.photo + ')'}"></div>
                  </div>
                </div>
              </div>


            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
